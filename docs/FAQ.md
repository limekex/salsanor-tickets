# Frequently Asked Questions (FAQ)

**Last Updated:** 21. desember 2025

## Table of Contents

- [For Participants (Frontend Users)](#for-participants-frontend-users)
- [For Instructors](#for-instructors)
- [For Check-in Staff](#for-check-in-staff)
- [For Organization Finance Managers](#for-organization-finance-managers)
- [For Organization Admins](#for-organization-admins)
- [For Global Admins](#for-global-admins)
- [Technical Questions](#technical-questions)

---

## For Participants (Frontend Users)

### Account & Profile

**Q: How do I create an account?**  
A: Click "Sign Up" in the top right corner, enter your email, and follow the verification link sent to your email. After verifying, you'll complete your profile with name, phone, and emergency contact.

**Q: I didn't receive the verification email. What do I do?**  
A: Check your spam/junk folder. If still not there, go to the login page and click "Resend verification email". If problems persist, contact support.

**Q: How do I update my profile information?**  
A: Navigate to your profile page (click your name in top right → Profile) and click "Edit Profile". You can update your name, phone, emergency contact, and dietary preferences.

**Q: How do I change my language preference?**  
A: Go to Profile → Settings → Language Preference. Choose between Norwegian or English. This affects the language used in emails and notifications sent to you.

**Q: Can I delete my account?**  
A: Currently, account deletion must be requested through your organization's admin. Contact them directly or email support with your request.

### Memberships

**Q: How do I become a member?**  
A: Navigate to the organization's page, click "Memberships", select a membership tier, and complete the payment. Some memberships require admin approval after payment.

**Q: Why is my membership still "pending"?**  
A: Some membership tiers require manual approval from the organization. You'll receive an email once approved. If it's been more than 48 hours, contact the organization.

**Q: How do I renew my membership?**  
A: You'll receive a renewal reminder email before expiry. You can also renew anytime from your profile page under "Memberships" → "Renew".

**Q: What's the difference between membership tiers?**  
A: Each organization defines their own tiers. Common differences include access to special events, discounts, voting rights, and priority registration. Check the membership tier description for details.

**Q: I paid for a membership but nothing happened. What now?**  
A: Payment processing can take a few minutes. Check your email for order confirmation. If you received confirmation but membership isn't showing, try refreshing your profile page. Contact support if the issue persists.

### Course Registration

**Q: How do I register for a course?**  
A: Find the course on the organization's page, click "Register", select your role (leader/follower), and complete payment. You'll receive confirmation via email.

**Q: Can I register for multiple course periods at once?**  
A: Yes! Add all desired periods to your cart, then checkout once. You'll save time and can see your total cost upfront.

**Q: What if a course is full?**  
A: You can join the waitlist! If a spot opens up, you'll receive an email notification with 48 hours to claim it.

**Q: How does the waitlist work?**  
A: When you join a waitlist, you'll receive an email confirmation. If a spot becomes available, you get an email with a payment link. You have 48 hours to complete payment, or the spot goes to the next person.

**Q: Can I cancel my registration?**  
A: Yes, contact your organization's admin to request cancellation. Depending on the organization's policy and timing, you may be eligible for a full refund, partial refund, or no refund. Cancellation decisions are handled by organization admins.

**Q: How long does a refund take to process?**  
A: Refunds are processed through Stripe and typically appear in your account within 5-10 business days, depending on your bank.

### Payments

**Q: What payment methods are accepted?**  
A: We use Stripe for secure payment processing. You can pay with credit card, debit card, Apple Pay, or Google Pay.

**Q: Is my payment information secure?**  
A: Yes. We never store your card details. All payment information is handled securely by Stripe, a PCI-compliant payment processor.

**Q: I was charged but didn't receive confirmation. What happened?**  
A: Check your email spam folder for the order confirmation. If not there, check your profile page to see if the registration appears. Contact support with your transaction ID if issues persist.

**Q: Can I get a refund?**  
A: Refund policies vary by organization and are typically displayed during registration. Contact the organization's admin to request a refund.

**Q: Why did my payment fail?**  
A: Common reasons include insufficient funds, incorrect card details, or bank security blocks. Check your email for a "Payment Failed" notification with details. You can retry payment from the link in the email.

### Tickets & Check-in

**Q: How do I access my ticket?**  
A: After successful payment, you'll receive an email with your ticket link. You can also access tickets from your profile page under "Tickets" or "Registrations".

**Q: Do I need to print my ticket?**  
A: No! Show the QR code on your phone at check-in. Staff will scan it directly from your screen.

**Q: I lost my ticket email. How do I get it again?**  
A: Go to your profile page, find the registration under "Tickets" or "Registrations", and click to view the QR code.

**Q: Can I transfer my ticket to someone else?**  
A: This depends on the organization's policy. Contact their admin to request a transfer.

### Discounts

**Q: How do I apply a discount code?**  
A: During checkout, look for "Discount Code" field above the payment button. Enter your code and click "Apply". The discount will be reflected in your total.

**Q: My discount code isn't working. Why?**  
A: Discount codes may have restrictions:
- Expired date
- Already used (if single-use)
- Not valid for selected membership/course
- Minimum purchase requirement not met

Check the code details or contact the organization for clarification.

**Q: Can I use multiple discount codes?**  
A: No, only one discount code can be applied per order.

### Email Notifications

**Q: What emails will I receive?**  
A: You'll receive emails for:
- Account verification
- Order confirmations
- Membership approval/rejection
- Waitlist updates
- Event reminders
- Payment failures
- Password resets

**Q: How do I stop receiving emails?**  
A: You can't opt out of transactional emails (order confirmations, tickets), but marketing emails will have an "unsubscribe" link. For other concerns, contact support.

**Q: I'm not receiving any emails. What's wrong?**  
A: Check your spam/junk folder. Add noreply@salsanor.no to your contacts. If still having issues, verify your email address is correct in your profile.

---

## For Instructors

### Class Management

**Q: How do I view my assigned classes?**  
A: Navigate to the organization's portal and look for "My Classes" or "Teaching Schedule". You'll see all periods where you're assigned as instructor.

**Q: Can I see the roster for my class?**  
A: Yes, click into the specific period to view all registered participants, including their roles (leader/follower) and any special notes.

**Q: How do I mark attendance?**  
A: Currently, attendance is handled by check-in staff. Future updates will add instructor-managed attendance features.

**Q: A student asked to change from leader to follower. Can I do that?**  
A: Role changes must be done by organization admins. Forward the request to them.

### Communication

**Q: How do I contact my students?**  
A: Currently, bulk email to class participants must be sent through organization admins. We're working on direct instructor communication features.

**Q: Can I see student emergency contacts?**  
A: Emergency contacts are visible to instructors in the class roster for safety purposes. This information is confidential and should only be used in emergencies.

---

## For Check-in Staff

### Check-in Process

**Q: How do I check someone in?**  
A: Use the check-in scanner at `/checkin`. Scan the QR code from their ticket. The system will confirm check-in with a green success message.

**Q: What if someone's ticket doesn't scan?**  
A: Common issues:
- Screen brightness too low (ask them to increase it)
- Cracked screen obscuring QR code
- Wrong event selected in scanner

If still failing, manually search by name or ticket number.

**Q: Can someone check in without a ticket?**  
A: No. All participants must have a valid ticket. If they paid but don't have a ticket, direct them to check their email or profile page.

**Q: Someone checked in by mistake. Can I undo it?**  
A: Currently, check-in reversal requires admin access. Contact your organization admin to undo a check-in.

**Q: What does "already checked in" mean?**  
A: This person has already been scanned for this event. The system prevents duplicate check-ins.

### Membership Verification

**Q: How do I verify someone's membership?**  
A: Use the membership scanner at `/membership-scanner`. Scan their membership QR code to see status, tier, and expiry date.

**Q: What if their membership shows as "expired"?**  
A: They need to renew before accessing member benefits. Direct them to the membership page or organization admin.

**Q: Can I check in someone with a "pending" membership?**  
A: This depends on organization policy. Consult with your organization admin for guidance.

---

## For Organization Finance Managers

### Financial Reports

**Q: How do I view sales reports?**  
A: Navigate to Staff Admin → Finance. You'll see revenue breakdowns by period, membership tier, and payment status.

**Q: Can I export financial data?**  
A: Yes, most financial reports have an "Export CSV" button for Excel/accounting software import.

**Q: What's the difference between "Orders" and "Registrations"?**  
A: Orders are payment records. Registrations are the actual course sign-ups. One order can contain multiple registrations.

### Payment Issues

**Q: A student says they paid but order shows unpaid. What do I check?**  
A: Go to Staff Admin → Periods → [Period] → Registrations. Find the student and check their order status. If showing "PENDING_PAYMENT", check Stripe dashboard for payment status. Payment webhooks can sometimes delay.

**Q: How do I issue a refund?**  
A: Go to Staff Admin → Registrations, find the registration to cancel, and click "Cancel". Choose refund option:
- **Full refund (100%)**: Entire amount returned
- **Partial refund**: Set custom percentage (e.g., 50%)
- **No refund (0%)**: Cancel without refund

The system processes the Stripe refund automatically and sends a cancellation email to the participant.

**Q: How long do refunds take?**  
A: Stripe processes refunds immediately, but they typically appear in the customer's account within 5-10 business days depending on their bank.

**Q: Can I cancel a registration without refunding?**  
A: Yes, select "No refund (0%)" when canceling. This is useful for no-show policies or late cancellations.

**Q: What fees does the platform charge?**  
A: Platform fees are configured by global admins. Check with your organization admin for specific fee structure. Typically shown during checkout.

### MVA (VAT) Handling

**Q: How is MVA calculated?**  
A: MVA is automatically calculated based on the organization's MVA rate (set by admin). It's included in the displayed price.

**Q: We're MVA exempt. How do we disable it?**  
A: Organization admins can disable MVA in organization settings. Navigate to Settings → Financial → MVA Settings.

---

## For Organization Admins

### Organization Setup

**Q: How do I update our organization details?**  
A: Navigate to your organization page, click "Edit Organization", and update name, description, logo, and contact information.

**Q: How do I add staff members?**  
A: Go to Staff Admin → Users → "Add User". Enter their email and assign appropriate role (FINANCE, CHECKIN, INSTRUCTOR).

**Q: Can I customize our membership tiers?**  
A: Yes! Go to Staff Admin → Products → Memberships. You can create, edit, or disable membership tiers.

### Period Management

**Q: How do I create a new course period?**  
A: Navigate to Staff Admin → Products → Periods → "New Period". Fill in details including dates, pricing, capacity, and instructor assignments.

**Q: Can I copy settings from a previous period?**  
A: Currently no, but this feature is planned. For now, keep a template document with your standard settings.

**Q: How do I close registration for a full period?**  
A: Edit the period and toggle "Registration Open" to off. Existing registrations remain valid, but new sign-ups are blocked.

### Membership Management

**Q: Someone paid for membership but it needs approval. What do I do?**  
A: Go to Staff Admin → Products → Memberships. Find the pending membership and click "Approve". They'll receive an email with their member number.

**Q: How do I reject a membership application?**  
A: In the same memberships list, click "Reject". Add a reason if needed. The applicant will be notified but not charged (if payment was held).

**Q: Can I manually change membership status?**  
A: Yes, there's a status dropdown for testing purposes. In production, use Approve/Reject buttons for proper audit trail.

**Q: How do I delete old/cancelled memberships?**  
A: Only EXPIRED or CANCELLED memberships can be deleted. Find the membership and click the trash icon. This is permanent and cannot be undone.

### Email Configuration

**Q: How do I set up email sending?**  
A: You need to be a GLOBAL ADMIN to configure email providers. Contact the platform administrator to set up Brevo or other email service.

**Q: Can I customize email templates for our organization?**  
A: Currently, only global templates are available. Organization-specific template overrides are planned for a future update.

**Q: Why are members not receiving approval emails?**  
A: Check:
1. Email settings configured (`/admin/email`)
2. Brevo API key valid
3. Email logs (`/admin/email/logs`) for errors
4. Member's email address is correct

### Discount Management

**Q: How do I create a discount code?**  
A: Go to Staff Admin → Products → Discounts → "New Discount". Configure the code, amount/percentage, validity period, and usage limits.

**Q: Can I make a discount work for only specific periods?**  
A: Yes! When creating the discount, select "Specific Periods" and choose which periods the code applies to.

**Q: How do I see who used a discount code?**  
A: View the discount details, and you'll see usage count and history. For detailed order information, cross-reference in financial reports.

---

## For Global Admins

### Platform Configuration

**Q: How do I add a new organization?**  
A: Navigate to Admin → Organizers → "New Organizer". Fill in details and assign an organization admin user.

**Q: How do I grant admin access to someone?**  
A: Go to Admin → Users, find the user, and click "Manage Roles". Add ADMIN role for global access, or ORG_ADMIN for organization-specific access.

**Q: Where do I configure email settings?**  
A: Navigate to Settings → Email Settings. Configure Brevo API key, sender details, and test email sending.

### Email System

**Q: How do I add new email templates?**  
A: Edit the seed script (`packages/database/scripts/seed-email-templates.ts`), add your template, and run:
```bash
cd packages/database
npx tsx scripts/seed-email-templates.ts
```

**Q: Can I edit templates in the UI?**  
A: Yes! Navigate to Settings → Email Templates. Select a template, edit HTML/text content, and save.

**Q: How do I check if emails are sending?**  
A: Go to Settings → Email Logs to view all sent emails, their status, and any error messages.

### User Management

**Q: How do I find a specific user?**  
A: Admin → Users has search and filter capabilities. Search by email, name, or role.

**Q: Someone locked themselves out. How do I reset their password?**  
A: Password resets must be initiated by the user through the "Forgot Password" flow. You cannot manually reset passwords for security reasons.

**Q: Can I merge duplicate user accounts?**  
A: Account merging is not currently supported. Contact technical support for assistance with this advanced operation.

### Technical Issues

**Q: Email templates are rendering incorrectly. What do I check?**  
A: 
1. Preview the template in Email Templates editor
2. Check HTML for syntax errors
3. Test with sample data
4. Verify all variables are properly substituted
5. Check EmailLog for specific errors

**Q: Payment webhooks are failing. How do I debug?**  
A: 
1. Check Stripe dashboard for webhook delivery status
2. View application logs for error messages
3. Verify webhook endpoint is publicly accessible
4. Confirm webhook signing secret is correct in environment variables

---

## Technical Questions

### For Developers

**Q: Where is the email service code?**  
A: `apps/web/src/lib/email/email-service.ts` - Singleton service handling all email operations.

**Q: How do I send a custom email?**  
A: Use the emailService:
```typescript
import { emailService } from '@/lib/email/email-service'

await emailService.sendTransactional({
  templateSlug: 'your-template-slug',
  recipientEmail: 'user@example.com',
  recipientName: 'User Name',
  variables: {
    variableName: 'value'
  }
})
```

**Q: How do I add a new template variable?**  
A: 
1. Update template HTML to use `{{variableName}}`
2. Add variable to template's `variables` JSON field
3. Pass variable value when calling sendTransactional
4. Update seed script if it's a global template

**Q: Where are email templates stored?**  
A: Database table `EmailTemplate`. Seed script at `packages/database/scripts/seed-email-templates.ts`.

**Q: How do I debug email sending issues?**  
A: 
1. Check EmailLog table for status and errors
2. Enable console logging in email-service.ts
3. Check Brevo dashboard for API logs
4. Verify environment variables are set
5. Test with simple template first

**Q: Can I use a different email provider?**  
A: Currently only Brevo is fully implemented. To add another provider:
1. Install provider SDK
2. Update EmailService class
3. Add provider to EmailProviderType enum
4. Update admin UI for configuration

**Q: How do I run migrations for email tables?**  
A: Email tables are already in schema. If you need to modify:
```bash
cd packages/database
npx prisma migrate dev --name your-migration-name
```

**Q: Where is the template editor?**  
A: 
- Page: `apps/web/src/app/(site)/(admin)/admin/email/templates/page.tsx`
- Component: Same directory, `email-template-editor.tsx`
- Actions: `apps/web/src/app/actions/admin/email-templates.ts`

---

## Need More Help?

### For Participants
Contact your organization's admin through their contact information on their organization page.

### For Organization Staff
Contact your organization admin or email platform support.

### For Organization Admins
Contact global platform administrator or check the [Email System Status Report](EMAIL_SYSTEM_STATUS.md).

### For Developers
- Check [Email System Status Report](EMAIL_SYSTEM_STATUS.md)
- Review issue tracker: `docs/issues/github/09-implement-email-system.md`
- Check codebase documentation in source files

---

**Document Version:** 1.0  
**Last Updated:** 21. desember 2025  
**Maintained by:** Development Team

*This FAQ is a living document. Please suggest additions by creating an issue or contacting the development team.*
